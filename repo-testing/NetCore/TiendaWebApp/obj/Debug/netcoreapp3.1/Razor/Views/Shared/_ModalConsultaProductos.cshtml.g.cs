#pragma checksum "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "48543edbfb427e47745b7f48eb3b6f84f822e320"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shared__ModalConsultaProductos), @"mvc.1.0.view", @"/Views/Shared/_ModalConsultaProductos.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\_ViewImports.cshtml"
using TiendaWebApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\_ViewImports.cshtml"
using TiendaWebApp.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
using Data;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"48543edbfb427e47745b7f48eb3b6f84f822e320", @"/Views/Shared/_ModalConsultaProductos.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"5daaffb18d3ce6ecb1f10fbcb0f53d5c43386414", @"/Views/_ViewImports.cshtml")]
    public class Views_Shared__ModalConsultaProductos : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
  
    List<Producto> coincidendias = (List<Producto>)ViewBag.ListaCoincidencias;
    List<DetalleFactura> detalle = (List<DetalleFactura>)ViewBag.DetalleFactura;

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<script>\r\n    var arreglo = ");
#nullable restore
#line 8 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
             Write(Html.Raw(Json.Serialize(coincidendias)));

#line default
#line hidden
#nullable disable
            WriteLiteral(";\r\n    var detalle = ");
#nullable restore
#line 9 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
             Write(Html.Raw(Json.Serialize(detalle)));

#line default
#line hidden
#nullable disable
            WriteLiteral(";\r\n    //console.log(\"Valor arreglo-->: \" + Json.stringify(arreglo);\r\n</script>\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n\r\n");
#nullable restore
#line 15 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
         if (coincidendias.Count != 0)
        {


#line default
#line hidden
#nullable disable
            WriteLiteral(@"            <table class=""table table-striped"">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Descripcion</th>
                        <th></th>
                    </tr>
                </thead>
");
#nullable restore
#line 26 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
                 foreach (var item in coincidendias)
                {


#line default
#line hidden
#nullable disable
            WriteLiteral("                    <tr>\r\n                        <td>");
#nullable restore
#line 30 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
                       Write(item.Nombre);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                        <td>");
#nullable restore
#line 31 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
                       Write(item.Descripcion);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                        <td><input type=\"radio\" class=\"controlElemento\" name=\"producto\"");
            BeginWriteAttribute("value", " value=\"", 1062, "\"", 1082, 1);
#nullable restore
#line 32 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
WriteAttributeValue("", 1070, item.Codigo, 1070, 12, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" /></td>\r\n                    </tr>\r\n");
#nullable restore
#line 34 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"

                }

#line default
#line hidden
#nullable disable
            WriteLiteral("            </table>\r\n            <br />\r\n");
#nullable restore
#line 38 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"


        }
        else
        {

#line default
#line hidden
#nullable disable
            WriteLiteral("            <label>No se encontraron coincidencias</label>\r\n            <br />\r\n");
#nullable restore
#line 45 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("    </div>\r\n\r\n</div>\r\n<div class=\"containerESP\" id=\"propiedadesProducto\" style=\"display:none\">\r\n    <div class=\"row\" style=\"margin-bottom:10px;\">\r\n        <div class=\"col-lg-9 col-xs-6\" style=\"text-align:right\">\r\n            <label");
            BeginWriteAttribute("for", " for=\"", 1545, "\"", 1551, 0);
            EndWriteAttribute();
            WriteLiteral(@" class=""form-label text-white "">Cantidad</label>
        </div>
        <div class=""col-lg-3 col-xs-6"">
            <input type=""number"" min=""1"" class=""form-control"" id=""cantidadProducto"" onchange=""if($('#cantidadProducto').val()<1)$('#cantidadProducto').val(1)""");
            BeginWriteAttribute("placeholder", " placeholder=\"", 1817, "\"", 1831, 0);
            EndWriteAttribute();
            WriteLiteral(">\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"containerESP\">\r\n    <div class=\"row\" style=\"margin-bottom:10px;\">\r\n");
#nullable restore
#line 61 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
         if (coincidendias.Count == 0)
        {

#line default
#line hidden
#nullable disable
            WriteLiteral(@"            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <span></span>
            </div>
            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <span></span>
            </div>
            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <button type=""button"" class=""btn btn-danger btn-block "" data-dismiss=""modal"" aria-label=""Close"" id=""btnCerrar"" style=""display:block"">Cerrar</button>
            </div>
");
#nullable restore
#line 72 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
        }
        else
        {

#line default
#line hidden
#nullable disable
            WriteLiteral(@"            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <span></span>
            </div>
            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <button type=""button"" class=""btn btn-danger btn-block "" data-dismiss=""modal"" aria-label=""Close"" id=""btnCerrar"" style=""display:block"">Cerrar</button>
            </div>
            <div class="" col-lg-4 col-xs-12"" style=""padding-right:0px;padding-top: 5px;"">
                <button type=""button"" class=""btn btn-primary btn-block"" id=""btnAgregar"">Agregar</button>
            </div>
");
#nullable restore
#line 84 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n    </div>\r\n\r\n\r\n</div>\r\n<script>\r\n    //var lc = JSON.parse(");
#nullable restore
#line 93 "C:\Users\DELL\Documents\repo-testing\NetCore\TiendaWebApp\Views\Shared\_ModalConsultaProductos.cshtml"
                     Write(coincidendias);

#line default
#line hidden
#nullable disable
            WriteLiteral(@");
    $("".controlElemento"").click(function () {
        $(""#propiedadesProducto"").show();

    });
    $(""#btnAgregar"").click(function () {
        var cantidad = $(""#cantidadProducto"").val();
        var codigo = $('input[name=producto]:checked').val();
        var producto = null;
        var duplicado = false;
        if (codigo== undefined) {
            Swal.fire({
                title: 'Error!',
                text: ""Debe seleccionar un producto primero"",
                icon: 'error',
                confirmButtonText: 'OK'
            });
        } else {
            if (cantidad == """") {
                Swal.fire({
                    title: 'Error!',
                    text: ""Llene el campo cantidad"",
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            } else {
                arreglo.forEach(element => {
                    if (element.codigo == codigo) {
                        producto = element;//producto ");
            WriteLiteral(@"seleccionado de la lista

                        detalle.forEach(element => {//buscando el elemento en el detalle
                            if (element.idCodigoProducto == codigo) {
                                duplicado = true;
                            }
                        });

                        if (duplicado) {
                            Swal.fire({
                                title: 'Error!',
                                text: ""Ese producto ya fue ingresado previamente"",
                                icon: 'error',
                                confirmButtonText: 'OK'
                            });
                        } else {
                            if (cantidad > producto.stock) {
                                Swal.fire({
                                    title: 'Error!',
                                    text: ""No se cuenta con el stock suficiente: Stock actual "" + producto.stock,
                                    icon: 'error',
     ");
            WriteLiteral(@"                               confirmButtonText: 'OK'
                                });
                            } else {
                                $.ajax({
                                    url: urlAgregarDetalleTemp,
                                    method: ""POST"",
                                    data: { _producto: producto, _cantidad: cantidad },

                                    success: function (data) {
                                        if (data.codigo == ""000"") {
                                            window.location.href = urlIndexFacturar;
                                        }
                                    }
                                });
                            }
                        }
                    }
                });
            }
        }
    })
</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
